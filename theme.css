/* theme.css
   Load AFTER style.css
   Goal: subtle iOS / liquid glass / soft 3D (layout-only shadows; buttons stay clean)
*/

/* =========================
   Theme tokens
   ========================= */
:root{
  --glass-bg: rgba(255,255,255,0.72);
  --glass-bg-strong: rgba(255,255,255,0.82);
  --glass-border: rgba(11,18,32,0.10);

  --shadow-layout-1: 0 10px 28px rgba(11,18,32,0.07);
  --shadow-layout-2: 0 18px 44px rgba(11,18,32,0.10);
  --shadow-inset-rim: inset 0 1px 0 rgba(255,255,255,0.60);

  --tint-blue: rgba(10,132,255,0.10);
  --tint-red: rgba(255,59,48,0.08);
  --tint-orange: rgba(255,159,10,0.08);
  --tint-green: rgba(52,199,89,0.08);
}

/* =========================
   Background stage (subtle)
   ========================= */
body{
  background-color: var(--bg);
  background-image:
    radial-gradient(1200px 800px at 10% 8%, rgba(10,132,255,0.09) 0%, rgba(10,132,255,0.04) 40%, rgba(10,132,255,0.00) 72%),
    radial-gradient(1100px 780px at 90% 18%, rgba(255,159,10,0.07) 0%, rgba(255,159,10,0.03) 42%, rgba(255,159,10,0.00) 74%),
    radial-gradient(1200px 820px at 72% 92%, rgba(52,199,89,0.07) 0%, rgba(52,199,89,0.03) 44%, rgba(52,199,89,0.00) 76%),
    radial-gradient(1100px 760px at 18% 92%, rgba(255,59,48,0.06) 0%, rgba(255,59,48,0.025) 46%, rgba(255,59,48,0.00) 78%),
    radial-gradient(900px 600px at 50% 50%, rgba(11,18,32,0.02) 0%, rgba(11,18,32,0.01) 48%, rgba(11,18,32,0.00) 80%);
  background-attachment: fixed;
}

/* a tiny “glass sparkle” layer */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(800px 400px at 50% -10%, rgba(255,255,255,0.55), transparent 60%),
    radial-gradient(900px 500px at 110% 40%, rgba(255,255,255,0.35), transparent 65%),
    radial-gradient(900px 500px at -10% 70%, rgba(255,255,255,0.28), transparent 65%);
  opacity: 0.25;
}

/* =========================
   Glass surfaces (layout)
   ========================= */
.header,
.panel,
.assistant-summary,
.triage-strip,
.modal{
  border-color: var(--glass-border);
  background: var(--glass-bg);
  -webkit-backdrop-filter: blur(18px);
  backdrop-filter: blur(18px);
  box-shadow: var(--shadow-layout-1);
}

/* stronger “focus card” for assistant summary */
.assistant-summary{
  background: var(--glass-bg-strong);
  box-shadow:
    0 0 0 1px rgba(10,132,255,0.05),
    var(--shadow-layout-2);
}

/* inner rim highlight */
.header,
.panel,
.assistant-summary,
.triage-strip,
.modal{
  position: relative;
}
.panel::after,
.assistant-summary::after,
.triage-strip::after,
.modal::after{
  content:"";
  position:absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events:none;
  box-shadow: var(--shadow-inset-rim);
  opacity: 0.95;
}

/* =========================
   Panel tinting by category
   (uses data-panel-category in Panel.js)
   ========================= */
.panel[data-panel-category="urgent_attention"]{
  background: color-mix(in srgb, var(--glass-bg) 84%, var(--tint-red) 16%);
}
.panel[data-panel-category="action_required"]{
  background: color-mix(in srgb, var(--glass-bg) 84%, var(--tint-blue) 16%);
}
.panel[data-panel-category="documents_to_review"]{
  background: color-mix(in srgb, var(--glass-bg) 86%, var(--tint-orange) 14%);
}
.panel[data-panel-category="informational"]{
  background: color-mix(in srgb, var(--glass-bg) 86%, var(--tint-green) 14%);
}

/* Panel head: slightly more “frosted” */
.panel-head{
  background: rgba(255,255,255,0.55);
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
}

/* =========================
   Cards: slightly more glass
   ========================= */
.email-card{
  border-color: rgba(11,18,32,0.10);
  background: rgba(248, 252, 255, 0.62); /* airy blue glass */
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
}

/* subtle “sheen” */
.email-card::after{
  content:"";
  position:absolute;
  left: 10px;
  right: 10px;
  top: 10px;
  height: 34px;
  border-radius: 14px;
  pointer-events:none;
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.65),
    rgba(255,255,255,0.00)
  );
  opacity: 0.45;
}

/* hover lift without changing layout */
.email-card{
  transition: transform 140ms ease, border-color 140ms ease;
}
.email-card:hover{
  transform: translateY(-2px);
  border-color: rgba(11,18,32,0.14);
}

/* =========================
   KPI tiles: glass polish
   ========================= */
.kpi{
  background: rgba(255,255,255,0.70);
  border-color: rgba(11,18,32,0.10);
  -webkit-backdrop-filter: blur(16px);
  backdrop-filter: blur(16px);
  /* box-shadow: 0 10px 24px rgba(11,18,32,0.06); */
}

/* =========================
   Toast: more “glass”
   ========================= */
.toast{
  border-color: rgba(11,18,32,0.10);
  background: rgba(255,255,255,0.86);
  -webkit-backdrop-filter: blur(16px);
  backdrop-filter: blur(16px);
}

/* =========================
   Buttons: keep clean (no heavy shadows)
   ========================= */
.icon-btn,
.card-action,
.assistant-intent,
.modal-close,
.snooze-menu button{
  box-shadow: none !important;
}

/* Slightly more “iOS” borders on pill-like controls */
.icon-btn,
.card-action,
.assistant-intent{
  border-color: rgba(11,18,32,0.10);
}

/* =========================
   Modal: stronger presence
   ========================= */
.modal{
  background: rgba(255,255,255,0.84);
  box-shadow: 0 26px 70px rgba(11,18,32,0.18);
}

/* Graceful fallback if blur unsupported */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))){
  .header,
  .panel,
  .assistant-summary,
  .triage-strip,
  .modal,
  .kpi,
  .toast,
  .email-card{
    background: rgba(255,255,255,0.92);
  }
}